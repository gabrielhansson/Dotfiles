// Copyright (C) 1999-2019 Siber Systems Inc. All Rights Reserved.
function PassGenDlg_FillPassword(){var e=$(PWGGEN_PWDVALUE_TEXT_ID).value;if(-1!=e){var _={};_[PWD_GEN_PWD_PROPERTY]=e,getProxyRfo().FillPasswordField(_)}}function PassGenDlg_CopyToClipboard(){var e=$(PWGGEN_PWDVALUE_TEXT_ID).value;-1!=e&&Clipboard.copy(e)}function PassGenDlg_SaveDlgSettings(){try{$(PWGGEN_UPPERCASE_CHK_ID).checked||$(PWGGEN_LOWERCASE_CHK_ID).checked||$(PWGGEN_DIGITS_CHK_ID).checked||$(PWGGEN_SPECSYMBOLS_CHK_ID).checked||($(PWGGEN_DIGITS_CHK_ID).checked=!0),PutSettingsforSection("sa-generator",[{rf_pwd_generate_number_symbols:$(PWGGEN_SYMBNUMBER_ID).value},{rf_pwd_generate_upper_chk:$(PWGGEN_UPPERCASE_CHK_ID).checked?1:0},{rf_pwd_generate_digits_chk:$(PWGGEN_DIGITS_CHK_ID).checked?1:0},{rf_pwd_generate_lower_chk:$(PWGGEN_LOWERCASE_CHK_ID).checked?1:0},{rf_pwd_generate_specialsymb_chk:$(PWGGEN_SPECSYMBOLS_CHK_ID).checked?1:0},{rf_pwd_generate_special_chars:$(PWGGEN_SPECSYMBOLS_TEXT_ID).value?$(PWGGEN_SPECSYMBOLS_TEXT_ID).value:"!@#$%^&"},{rf_pwd_generate_copycliboardp_chk:$(PWGGEN_COPY_CLIP_CHK_ID).checked?1:0},{rf_pwd_generate_excludesimilar_chk:$(PWGGEN_SIMILAR_CHECK_ID).checked?1:0},{rf_pwd_generate_onlyhexvalues_chk:$(PWGGEN_HEX_CHECK_ID).checked?1:0}])}catch(e){log("EXCEPTION in PassGenDlg_SaveDlgSettings:"+e.toString())}}function PassGenDlg_GeneratePassword(e){try{$(PWGGEN_ERRORMSG_TD_ID).textContent="";var _=getProxyRfo();if(!e)if((G=_.GetGeneratedPwdList()).length)return void PassGenDlg_InitSelectItems(G);var t=$(PWGGEN_SYMBNUMBER_ID),r=parseInt(t.value);if(0==r||r>PASSWORD_CHAR_LIMIT)return $(PWGGEN_ERRORMSG_TD_ID).textContent=localeString("PassGen_WrongChars_Errtext"),void $(PWGGEN_SYMBNUMBER_ID).focus();var a=$(PWGGEN_SPECSYMBOLS_CHK_ID).checked,s=$(PWGGEN_LOWERCASE_CHK_ID).checked,l=$(PWGGEN_UPPERCASE_CHK_ID).checked;$(PWGGEN_HEX_CHECK_ID).checked&&(a=!1,s=!1,l=!1);var G,E=RfapiJS.utils.generatePassword(r,l,s,$(PWGGEN_DIGITS_CHK_ID).checked,a,$(PWGGEN_SPECSYMBOLS_TEXT_ID).value,void 0,$(PWGGEN_HEX_CHECK_ID).checked,$(PWGGEN_SIMILAR_CHECK_ID).checked),n=$(PWGGEN_COPY_CLIP_CHK_ID);!E||1!=n.checked&&"true"!=n.checked||Clipboard.copy(E),PassGenDlg_InitSelectItems(G=E?_.AddItemToGeneratedPwdList(E):[])}catch(e){log("EXCEPTION in PassGenDlg_GeneratePassword:"+e.toString())}}function PassGenDlg_InitSelectItems(e){var _,t=$(PWGGEN_PWDVALUE_TEXT_ID);for(_=t.options.length-1;_>=0;_--)t.remove(_);for(_=0;_<e.length;_++)PassGenDlg_AddValueSelect(e[_],!1,0==_);PassGenDlg_AddValueSelect("",!0,!1),t.options.length>1&&($(PWDGEN_COPYBTN_ID).removeAttribute("disabled"),$(PWDGEN_FILLBTN_ID).removeAttribute("disabled"))}function PassGenDlg_AddValueSelect(e,_,t){var r=document.createElement("option");r.text=_?localeString("Cmd_ClearList_Key"):e,r.value=_?-1:e,r.setAttribute("class","password_value_opt"),$(PWGGEN_PWDVALUE_TEXT_ID).add(r),r.selected=t,t&&PassGenDlg_Show_PwdStrength(e,$("rfpassword_generator_strenght_img"),$("rfpassword_generator_strenght_lbl"),$("rf_passgen_strength_div"))}function PassGenDlg_SelectOnChange(e){var _=$(PWGGEN_PWDVALUE_TEXT_ID).value;if(-1==_){getProxyRfo().ClearGeneratedPwdList();var t=!1;return $(PWGGEN_UPPERCASE_CHK_ID).checked||$(PWGGEN_LOWERCASE_CHK_ID).checked||$(PWGGEN_DIGITS_CHK_ID).checked||$(PWGGEN_HEX_CHECK_ID).checked||$(PWGGEN_SPECSYMBOLS_TEXT_ID).value&&$(PWGGEN_SPECSYMBOLS_CHK_ID).checked||(t=!0),PassGenDlg_GeneratePassword(!t),t?$(PWDGEN_COPYBTN_ID).setAttribute("disabled","true"):$(PWDGEN_COPYBTN_ID).removeAttribute("disabled"),void(t?$(PWDGEN_FILLBTN_ID).setAttribute("disabled","true"):$(PWDGEN_FILLBTN_ID).removeAttribute("disabled"))}PassGenDlg_Show_PwdStrength(_,$("rfpassword_generator_strenght_img"),$("rfpassword_generator_strenght_lbl"),$("rf_passgen_strength_div"))}function PassGenDlg_HexCheckBoxOnClick(){$(PWGGEN_HEX_CHECK_ID).checked?($(PWGGEN_UPPERCASE_CHK_ID).disabled=$(PWGGEN_LOWERCASE_CHK_ID).disabled=$(PWGGEN_SPECSYMBOLS_CHK_ID).disabled=$(PWGGEN_DIGITS_CHK_ID).disabled="disabled",$("rf_passgen_upper_lbl").style.color=$("rf_passgen_lower_lbl").style.color=$("rf_passgen_digits_lbl").style.color="grey",$(PWGGEN_SPECSYMBOLS_TEXT_ID).disabled="disabled",$(PWGGEN_SPECSYMBOLS_TEXT_ID).style.color="grey",$(PWGGEN_GENERATE_BTN_ID).removeAttribute("disabled")):($(PWGGEN_UPPERCASE_CHK_ID).disabled=$(PWGGEN_LOWERCASE_CHK_ID).disabled=$(PWGGEN_DIGITS_CHK_ID).disabled=$(PWGGEN_SPECSYMBOLS_CHK_ID).disabled="",$("rf_passgen_upper_lbl").style.color=$("rf_passgen_lower_lbl").style.color=$("rf_passgen_digits_lbl").style.color="black",$(PWGGEN_SPECSYMBOLS_TEXT_ID).disabled=$(PWGGEN_SPECSYMBOLS_CHK_ID).checked?"":"disabled",$(PWGGEN_SPECSYMBOLS_TEXT_ID).style.color=$(PWGGEN_SPECSYMBOLS_CHK_ID).checked?"black":"grey",PassGenDlg_CheckAllInputs())}function PassGenDlg_CharsInputOnKeyDown(e){var _=e.which?e.which:e.keyCode,t=e.char||e.key;if(e.keyCode,8==_||46==_||37==_||39==_||16==_)return e.returnValue=!0,!0;var r="~_!@#$%^&*()+=-[]\\';,./{}|\":<>?".indexOf(t);if(-1==r)return e.returnValue=!1,!1;var a=$(PWGGEN_SPECSYMBOLS_TEXT_ID).value;if(!a.length)return e.returnValue=!0,!0;var s=a.indexOf(t);return-1==s?(e.returnValue=!0,!0):(e.returnValue=!1,!1)}function PassGenDlg_CharsInput_Paste(e){try{for(var _,t=e.clipboardData.getData("Text"),r="~_!@#$%^&*()+=-[]\\';,./{}|\":<>?",a=t.length,s=0;s<a;s++)_=t[s],-1==r.indexOf(_)&&(t=PassGenDlg_SpliceString(t,s,1),s=0,a-=1);return t.length&&(_=t[0],-1==r.indexOf(_)&&(t=PassGenDlg_SpliceString(t,0,1))),e.clipboardData.setData("text/plain",t),setTimeout(function(){$(PWGGEN_SPECSYMBOLS_TEXT_ID).value=t},150),e.returnValue=!1,!1}catch(e){log("EXCEPTION in PassGenDlg_CharsInput_Paste:"+e.toString())}}function PassGenDlg_CheckBoxOnClick(e){try{var _=((e=e||window.event).target?e.target:e.scrElement).checked;0==_||"false"==_?$(PWGGEN_UPPERCASE_CHK_ID).checked||$(PWGGEN_LOWERCASE_CHK_ID).checked||$(PWGGEN_DIGITS_CHK_ID).checked||$(PWGGEN_SPECSYMBOLS_TEXT_ID).value&&$(PWGGEN_SPECSYMBOLS_CHK_ID).checked||$(PWGGEN_GENERATE_BTN_ID).setAttribute("disabled","true"):$(PWGGEN_GENERATE_BTN_ID).removeAttribute("disabled")}catch(e){log("EXCEPTION in PassGenDlg_CheckBoxOnClick:"+e.toString())}}function PassGenDlg_SpecCharsCheckBoxOnClick(){$(PWGGEN_SPECSYMBOLS_CHK_ID).checked?($(PWGGEN_SPECSYMBOLS_TEXT_ID).removeAttribute("readonly"),$(PWGGEN_SPECSYMBOLS_TEXT_ID).style.color="black",$(PWGGEN_SPECSYMBOLS_TEXT_ID).disabled="",$(PWGGEN_GENERATE_BTN_ID).removeAttribute("disabled")):($(PWGGEN_SPECSYMBOLS_TEXT_ID).setAttribute("readonly","true"),$(PWGGEN_SPECSYMBOLS_TEXT_ID).style.color="grey",$(PWGGEN_SPECSYMBOLS_TEXT_ID).disabled="disabled",PassGenDlg_CheckAllInputs())}function PassGenDlg_CheckAllInputs(){$(PWGGEN_UPPERCASE_CHK_ID).checked||$(PWGGEN_LOWERCASE_CHK_ID).checked||$(PWGGEN_DIGITS_CHK_ID).checked||$(PWGGEN_HEX_CHECK_ID).checked||$(PWGGEN_SPECSYMBOLS_TEXT_ID).value&&$(PWGGEN_SPECSYMBOLS_CHK_ID).checked||$(PWGGEN_GENERATE_BTN_ID).setAttribute("disabled","true")}var ScoreLevelData={Weak:{image:"passaud_weak.ico",text:localeString("PassAud_PwdStrengthWeak"),color:"RGB(247,64,45)"},Medium:{image:"passaud_fair.ico",text:localeString("PassAud_PwdStrengthMedium"),color:"RGB(255,152,58)"},Good:{image:"passaud_good.ico",text:localeString("PassAud_PwdStrengthGood"),color:"RGB(153,201,42)"},Strong:{image:"passaud_strong.ico",text:localeString("PassAud_PwdStrengthStrong"),color:"RGB(88,179,79)"},Default:{image:"passaud_fair.ico",text:"n/a",color:"RGB(255,152,58)"},GetDataByLevel:function(e){switch(e){case 0:return this.Weak;case 1:return this.Medium;case 2:return this.Good;case 3:return this.Strong;default:return this.Default}}};function PassGenDlg_Show_PwdStrength(e,_,t,r){if(!e){var a=ScoreLevelData.GetDataByLevel(-1);return _.setAttribute("src",a.image),t.textContent=a.text,t.style.color=a.color,void(r.style.display="none")}var s=RfapiJS.SecurityScore.CalcPasswordStrength(e),l=RfapiJS.SecurityScore.GetScoreLevel(s);a=ScoreLevelData.GetDataByLevel(l);_.setAttribute("src",a.image),t.textContent=a.text,t.style.color=a.color,r.style.display="block"}function PassGenDlg_SpliceString(e,_,t){return e.substring(0,_)+e.substring(_+t)}function trace(){console_output(format_log_args(trace.caller,arguments))}function log(){console_output(format_log_args(log.caller,arguments))}
//# sourceMappingURL=password-generator.js.map